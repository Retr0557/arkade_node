{"ast":null,"code":"import{useState,useEffect}from\"react\";import axios from\"axios\";import Cookies from\"js-cookie\";import{useNavigate}from\"react-router-dom\";import\"./styles/homepage.css\";// Existing CSS\nimport\"./styles/profile.css\";// New CSS\nimport Header from\"./components/Header\";import API_URL from\"./config\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){const navigate=useNavigate();const[username,setUsername]=useState(\"\");const[newUsername,setNewUsername]=useState(\"\");const[loading,setLoading]=useState(false);const[message,setMessage]=useState(\"\");const[error,setError]=useState(\"\");useEffect(()=>{const storedUsername=Cookies.get(\"username\");if(!storedUsername){navigate(\"/login\");}else{setUsername(storedUsername);}},[navigate]);const handleUsernameUpdate=async e=>{e.preventDefault();setMessage(\"\");setError(\"\");if(!newUsername.trim()){setError(\"New username cannot be empty\");return;}setLoading(true);try{const response=await axios.post(API_URL+\"/usersAPI.php\",{serviceID:4,oldUsername:username,newUsername:newUsername.trim()});if(response.data.code===0){setMessage(\"Username updated successfully!\");setUsername(newUsername.trim());Cookies.set(\"username\",newUsername.trim(),{expires:7});setNewUsername(\"\");}else{setError(`Error updating username: ${response.data.message}`);}}catch(err){setError(`Server error: ${err.message}`);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsx(Header,{username:username}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"profile-title\",children:\"Profile Settings\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"profile-current\",children:[\"Current Username: \",/*#__PURE__*/_jsx(\"strong\",{children:username})]}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"profile-info\",children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"profile-error\",children:error}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"profile-success\",children:message}),/*#__PURE__*/_jsxs(\"form\",{className:\"profile-form\",onSubmit:handleUsernameUpdate,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newUsername\",children:\"New Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"newUsername\",value:newUsername,onChange:e=>setNewUsername(e.target.value),placeholder:\"Enter new username\",className:\"profile-input\",disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"profile-button\",disabled:loading||!newUsername.trim(),children:\"Update Username\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{Cookies.remove(\"username\");Cookies.remove(\"user_id\");navigate(\"/\");},className:\"profile-button\",style:{marginTop:\"1rem\"},children:\"Logout\"})]})})]});}","map":{"version":3,"names":["useState","useEffect","axios","Cookies","useNavigate","Header","API_URL","jsx","_jsx","jsxs","_jsxs","Profile","navigate","username","setUsername","newUsername","setNewUsername","loading","setLoading","message","setMessage","error","setError","storedUsername","get","handleUsernameUpdate","e","preventDefault","trim","response","post","serviceID","oldUsername","data","code","set","expires","err","className","children","onSubmit","htmlFor","type","id","value","onChange","target","placeholder","disabled","onClick","remove","style","marginTop"],"sources":["/Users/saligrammac/Desktop/arkade_node/client/src/Profile.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./styles/homepage.css\"; // Existing CSS\nimport \"./styles/profile.css\"; // New CSS\nimport Header from \"./components/Header\";\nimport API_URL from \"./config\";\n\nexport default function Profile() {\n  const navigate = useNavigate();\n  const [username, setUsername] = useState(\"\");\n  const [newUsername, setNewUsername] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    const storedUsername = Cookies.get(\"username\");\n    if (!storedUsername) {\n      navigate(\"/login\");\n    } else {\n      setUsername(storedUsername);\n    }\n  }, [navigate]);\n\n  const handleUsernameUpdate = async (e) => {\n    e.preventDefault();\n    setMessage(\"\");\n    setError(\"\");\n\n    if (!newUsername.trim()) {\n      setError(\"New username cannot be empty\");\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const response = await axios.post(API_URL + \"/usersAPI.php\", {\n        serviceID: 4,\n        oldUsername: username,\n        newUsername: newUsername.trim(),\n      });\n\n      if (response.data.code === 0) {\n        setMessage(\"Username updated successfully!\");\n        setUsername(newUsername.trim());\n        Cookies.set(\"username\", newUsername.trim(), { expires: 7 });\n        setNewUsername(\"\");\n      } else {\n        setError(`Error updating username: ${response.data.message}`);\n      }\n    } catch (err) {\n      setError(`Server error: ${err.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"home-container\">\n      <Header username={username} />\n      <div className=\"profile-wrapper\">\n        <div className=\"profile-card\">\n          <h2 className=\"profile-title\">Profile Settings</h2>\n          <p className=\"profile-current\">\n            Current Username: <strong>{username}</strong>\n          </p>\n\n          {loading && <p className=\"profile-info\">Loading...</p>}\n          {error && <p className=\"profile-error\">{error}</p>}\n          {message && <p className=\"profile-success\">{message}</p>}\n\n          <form className=\"profile-form\" onSubmit={handleUsernameUpdate}>\n            <label htmlFor=\"newUsername\">New Username:</label>\n            <input\n              type=\"text\"\n              id=\"newUsername\"\n              value={newUsername}\n              onChange={(e) => setNewUsername(e.target.value)}\n              placeholder=\"Enter new username\"\n              className=\"profile-input\"\n              disabled={loading}\n            />\n            <button\n              type=\"submit\"\n              className=\"profile-button\"\n              disabled={loading || !newUsername.trim()}\n            >\n              Update Username\n            </button>\n          </form>\n          <button\n            onClick={() => {\n              Cookies.remove(\"username\");\n              Cookies.remove(\"user_id\");\n              navigate(\"/\");\n            }}\n            className=\"profile-button\"\n            style={{ marginTop: \"1rem\" }}\n          >\n            Logout\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}