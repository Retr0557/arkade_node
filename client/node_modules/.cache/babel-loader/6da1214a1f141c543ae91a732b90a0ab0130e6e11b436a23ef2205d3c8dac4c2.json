{"ast":null,"code":"import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import\"./styles/loginstyle.css\";import\"./styles/loadingstyle.scss\";import axios from\"axios\";import Cookies from\"js-cookie\";import{io}from\"socket.io-client\";import API_URL from\"./config\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{setSocket}=_ref;const[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");const[signUp,setSignUp]=useState(true);const[secure,setSecure]=useState(false);const[loading,setLoading]=useState(false);const navigate=useNavigate();const handleSubmit=async e=>{setLoading(true);e.preventDefault();const trimmedUsername=username.trim();try{const serviceID=signUp?1:2;setPassword(prev=>secure?prev:\"\");const response=await axios.post(API_URL+\"/usersAPI.php\",{username:trimmedUsername,password,serviceID});if(response.data.code===0){Cookies.set(\"username\",trimmedUsername);Cookies.set(\"user_id\",response.data.user_id);const newSocket=io(\"https://arcade.pivotpt.in\",{transports:[\"websocket\"],query:{name:trimmedUsername,email:\"\"}});newSocket.connect();setSocket(newSocket);navigate(\"/home\");}else{alert(response.data.message);}}catch(error){console.error(`${signUp?\"Sign up\":\"Login\"} error:`,error);alert(\"Something went wrong. Please try again.\");}setLoading(false);};const toggleMode=()=>{setSignUp(prev=>!prev);};const toggleSecure=()=>{setSecure(prev=>!prev);};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-shape\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Arkade\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",value:username,onChange:e=>setUsername(e.target.value),placeholder:\"Enter your username\",required:true})}),secure?/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Enter your password\",required:true})}):null,/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"play-button\",disabled:loading,children:[/*#__PURE__*/_jsx(\"span\",{children:signUp?\"Sign Up\":\"Login\"}),/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:/*#__PURE__*/_jsx(\"polygon\",{points:\"5 3 19 12 5 21 5 3\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toggle-auth\",children:[signUp?\"Already have an account?\":\"New here?\",\" \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"toggle-button\",onClick:toggleMode,children:signUp?\"Login\":\"Sign Up\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toggle-auth\",children:[!secure?\"Secure your account? \":\"Just play the game\",\" \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"toggle-button\",onClick:toggleSecure,children:!secure?\"Secure\":\"Just Play\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"background-shapes\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"shape shape-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"shape shape-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"shape shape-3\"})]})]})});};export default Login;","map":{"version":3,"names":["useState","useNavigate","axios","Cookies","io","API_URL","jsx","_jsx","jsxs","_jsxs","Login","_ref","setSocket","username","setUsername","password","setPassword","signUp","setSignUp","secure","setSecure","loading","setLoading","navigate","handleSubmit","e","preventDefault","trimmedUsername","trim","serviceID","prev","response","post","data","code","set","user_id","newSocket","transports","query","name","email","connect","alert","message","error","console","toggleMode","toggleSecure","className","children","onSubmit","type","id","value","onChange","target","placeholder","required","disabled","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","onClick","role"],"sources":["/Users/saligrammac/Desktop/arkade_node/client/src/Login.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./styles/loginstyle.css\";\nimport \"./styles/loadingstyle.scss\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport { io } from \"socket.io-client\";\nimport API_URL from \"./config\";\nconst Login = ({ setSocket }) => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [signUp, setSignUp] = useState(true);\n  const [secure, setSecure] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    setLoading(true);\n    e.preventDefault();\n    const trimmedUsername = username.trim();\n    try {\n      const serviceID = signUp ? 1 : 2;\n      setPassword((prev) => (secure ? prev : \"\"));\n      const response = await axios.post(API_URL + \"/usersAPI.php\", {\n        username: trimmedUsername,\n        password,\n        serviceID,\n      });\n\n      if (response.data.code === 0) {\n        Cookies.set(\"username\", trimmedUsername);\n        Cookies.set(\"user_id\", response.data.user_id);\n        const newSocket = io(\"https://arcade.pivotpt.in\", {\n          transports: [\"websocket\"],\n          query: {\n            name: trimmedUsername,\n            email: \"\",\n          },\n        });\n        newSocket.connect();\n        setSocket(newSocket);\n        navigate(\"/home\");\n      } else {\n        alert(response.data.message);\n      }\n    } catch (error) {\n      console.error(`${signUp ? \"Sign up\" : \"Login\"} error:`, error);\n      alert(\"Something went wrong. Please try again.\");\n    }\n    setLoading(false);\n  };\n\n  const toggleMode = () => {\n    setSignUp((prev) => !prev);\n  };\n  const toggleSecure = () => {\n    setSecure((prev) => !prev);\n  };\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"login-card\">\n        <div className=\"login-header\">\n          <div className=\"logo-shape\"></div>\n          <h1>Arkade</h1>\n        </div>\n        <form onSubmit={handleSubmit}>\n          <div className=\"input-group\">\n            <input\n              type=\"text\"\n              id=\"username\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n              placeholder=\"Enter your username\"\n              required\n            />\n          </div>\n          {secure ? (\n            <div className=\"input-group\">\n              <input\n                type=\"text\"\n                id=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                placeholder=\"Enter your password\"\n                required\n              />\n            </div>\n          ) : null}\n\n          <button type=\"submit\" className=\"play-button\" disabled={loading}>\n            <span>{signUp ? \"Sign Up\" : \"Login\"}</span>\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"24\"\n              height=\"24\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            >\n              <polygon points=\"5 3 19 12 5 21 5 3\"></polygon>\n            </svg>\n          </button>\n\n          <div className=\"toggle-auth\">\n            {signUp ? \"Already have an account?\" : \"New here?\"}{\" \"}\n            <button\n              type=\"button\"\n              className=\"toggle-button\"\n              onClick={toggleMode}\n            >\n              {signUp ? \"Login\" : \"Sign Up\"}\n            </button>\n          </div>\n          <div className=\"toggle-auth\">\n            {!secure ? \"Secure your account? \" : \"Just play the game\"}{\" \"}\n            <button\n              type=\"button\"\n              className=\"toggle-button\"\n              onClick={toggleSecure}\n            >\n              {!secure ? \"Secure\" : \"Just Play\"}\n            </button>\n          </div>\n\n          {loading ? (\n            <div className=\"spinner-border\" role=\"status\">\n              <span className=\"visually-hidden\">Loading...</span>\n            </div>\n          ) : null}\n        </form>\n\n        <div className=\"background-shapes\">\n          <div className=\"shape shape-1\"></div>\n          <div className=\"shape shape-2\"></div>\n          <div className=\"shape shape-3\"></div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}